{% extends "base.html" %}

{% block title %}{{ profile_user.name }} - NexusApp{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto; padding: 20px;">
    <div class="glass-card" style="margin-bottom: 20px;">
        <h2>{{ profile_user.name }}</h2>
        <p style="color: var(--text-secondary);">@{{ profile_user.username }}</p>
        {% if profile_user.profile %}
        <p style="margin-top: 12px;">{{ profile_user.profile }}</p>
        {% endif %}
        
        {% if user.id != profile_user.id %}
        <div style="margin-top: 16px;">
            {% if user.is_following(profile_user) %}
            <button class="btn" onclick="unfollowUser({{ profile_user.id }})">언팔로우</button>
            {% else %}
            <button class="btn btn-primary" onclick="followUser({{ profile_user.id }})">팔로우</button>
            {% endif %}
        </div>
        {% endif %}
    </div>
    
    <h3>트윗</h3>
    {% if tweets %}
        {% for tweet in tweets %}
        <div class="glass-card" style="margin-bottom: 16px;">
            <p style="margin: 0;">{{ tweet.content }}</p>
            <p style="color: var(--text-secondary); font-size: 14px; margin-top: 8px;">{{ tweet.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
        </div>
        {% endfor %}
    {% else %}
        <div class="glass-card" style="text-align: center; padding: 40px;">
            <p style="color: var(--text-secondary);">아직 트윗이 없습니다.</p>
        </div>
    {% endif %}
</div>

<script>
async function followUser(userId) {
    const response = await fetch(`/api/follow/${userId}`, { method: 'POST' });
    if (response.ok) location.reload();
}

async function unfollowUser(userId) {
    const response = await fetch(`/api/unfollow/${userId}`, { method: 'POST' });
    if (response.ok) location.reload();
}
</script>
{% endblock %}
